{"ast":null,"code":"import _slicedToArray from\"C:/Andres/Semestre 2021-2/Desarrollo web/Bono-Parcial-1/marvelapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Card from'../Card/Card';import axios from'axios';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";var md5=require('md5');var PRIVATE_KEY='1a79518320092f0adcca9822825517090a22e0fc';var PUBLIC_KEY='e8e61be1a12aa4da11480c2bb40cbbff';var TS=Date.now();export var PersonajesMarvel=function PersonajesMarvel(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),characters=_useState2[0],setCharacters=_useState2[1];var hash=md5(\"\".concat(TS).concat(PRIVATE_KEY).concat(PUBLIC_KEY));var URL=\"https://gateway.marvel.com:443/v1/public/characters?ts=\".concat(TS,\"&apikey=\").concat(PUBLIC_KEY,\"&hash=\").concat(hash);useEffect(function(){if(!navigator.onLine){var charCache=null;caches.open('characters').then(function(cache){cache.match('/characters').then(function(res){res.text().then(function(text){charCache=JSON.parse(text);});});});if(localStorage.getItem(\"characters\")!==null){setCharacters(JSON.parse(localStorage.getItem(\"characters\")));}// else if(charCache !== null)\n// {\n//     //Caso para hacerlo con cache... (Por terminar)\n// }\nelse{var ch={name:'Loading...',description:'Loading...',Modified:'Loading...'};var chrs=[ch,ch,ch,ch,ch,ch];setCharacters(chrs);}}else{fetchCharacters();}},[]);var fetchCharacters=function fetchCharacters(){axios.get(URL).then(function(res){setCharacters(res.data.data.results);localStorage.setItem('characters',JSON.stringify(res.data.data.results));caches.open('characters').then(function(cache){cache.put('characters',new Response(JSON.stringify(res.data.data.results)));});}).catch(function(err){console.log(err);});axios.get(URL).then(function(res){setCharacters(res.data.data.results);}).catch(function(err){console.log(err);});};return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:characters.map(function(character){return/*#__PURE__*/_jsx(Card,{character:character},character.id);})});};export default PersonajesMarvel;","map":{"version":3,"sources":["C:/Andres/Semestre 2021-2/Desarrollo web/Bono-Parcial-1/marvelapp/src/components/personajesMarvel.js"],"names":["React","Card","axios","useEffect","useState","md5","require","PRIVATE_KEY","PUBLIC_KEY","TS","Date","now","PersonajesMarvel","characters","setCharacters","hash","URL","navigator","onLine","charCache","caches","open","then","cache","match","res","text","JSON","parse","localStorage","getItem","ch","name","description","Modified","chrs","fetchCharacters","get","data","results","setItem","stringify","put","Response","catch","err","console","log","map","character","id"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport Card from '../Card/Card'\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from 'react'\r\nconst md5 = require('md5')\r\n\r\nconst PRIVATE_KEY = '1a79518320092f0adcca9822825517090a22e0fc'\r\nconst PUBLIC_KEY = 'e8e61be1a12aa4da11480c2bb40cbbff'\r\nconst TS = Date.now()\r\n\r\nexport const PersonajesMarvel = () => {\r\n    \r\n    const [characters, setCharacters] = useState([])\r\n\r\n    let hash = md5(`${TS}${PRIVATE_KEY}${PUBLIC_KEY}`)\r\n    let URL = `https://gateway.marvel.com:443/v1/public/characters?ts=${TS}&apikey=${PUBLIC_KEY}&hash=${hash}`\r\n\r\n    useEffect(()=>{\r\n        if(!navigator.onLine){\r\n            let charCache = null\r\n            caches.open('characters').then(cache => {\r\n                cache.match('/characters')\r\n                .then(res => {\r\n                    res.text().then(text => {\r\n                        charCache=(JSON.parse(text))\r\n                    })\r\n                })\r\n            })\r\n            \r\n            if(localStorage.getItem(\"characters\") !== null) {\r\n                setCharacters(JSON.parse(localStorage.getItem(\"characters\")));\r\n            } \r\n            // else if(charCache !== null)\r\n            // {\r\n            //     //Caso para hacerlo con cache... (Por terminar)\r\n            // }\r\n            else {\r\n                const ch = {\r\n                    name : 'Loading...',\r\n                    description : 'Loading...',\r\n                    Modified: 'Loading...'\r\n                }\r\n\r\n                const chrs = [ch,ch,ch,ch,ch,ch]\r\n\r\n                setCharacters(chrs)\r\n            }\r\n        } else {\r\n            fetchCharacters()\r\n        }\r\n    }, [])\r\n\r\n    const fetchCharacters = () => {\r\n        axios.get(URL)\r\n        .then(res => {\r\n            setCharacters(res.data.data.results)\r\n            localStorage.setItem('characters', JSON.stringify(res.data.data.results));\r\n            caches.open('characters')\r\n            .then(cache => {\r\n                cache.put('characters', new Response(JSON.stringify(res.data.data.results)))\r\n            })\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n        \r\n        axios.get(URL)\r\n        .then(res => {\r\n            setCharacters(res.data.data.results)\r\n        })\r\n        .catch(err => {\r\n            console.log(err)\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid\">\r\n            {characters.map((character) => (\r\n                <Card key = {character.id} character = {character} />\r\n            ))}\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\nexport default PersonajesMarvel;"]},"metadata":{},"sourceType":"module"}